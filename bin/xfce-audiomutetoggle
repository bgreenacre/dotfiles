#!/bin/bash
#### Create ~/.pulse/mute if not exists
ls ~/.pulse/mute &> /dev/null
if [[ $? != 0 ]]
then
    echo "false" > ~/.pulse/mute
fi

ls ~/.pulse/volume &> /dev/null
if [[ $? != 0 ]]
then
    echo "100" > ~/.pulse/volume
fi

MUTE=`cat ~/.pulse/mute`        #Reads mute state
CURVOL=`cat ~/.pulse/volume`    #Reads volume state

if [[ $1 == "mute" ]]
then
    if [[ $MUTE == "false" ]]
    then
        pactl set-sink-mute 0 1
        pactl set-sink-mute 1 1
        echo "true" > ~/.pulse/mute
    exit    
    else
        pactl set-sink-mute 0 0
        pactl set-sink-mute 1 0
        echo "false" > ~/.pulse/mute    
    exit
    fi
fi

pactl set-sink-volume 0 $CURVOL
echo $CURVOL > ~/.pulse/volume # Write the new volume to disk to be read the next time the script is run.
